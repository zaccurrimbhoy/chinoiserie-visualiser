<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chinoiserie Visualiser</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: Georgia, serif;
      background: #fdf6ee;
      color: #2c2c2c;
      padding: 20px;
    }

    h1 {
      text-align: center;
      font-size: 1.6rem;
      margin-bottom: 6px;
      color: #4a2e1a;
      letter-spacing: 1px;
    }

    .subtitle {
      text-align: center;
      font-size: 0.9rem;
      color: #7a6a5a;
      margin-bottom: 24px;
    }

    .section-label {
      text-align: center;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: #7a6a5a;
      margin-bottom: 10px;
    }

    .btn-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
      margin-bottom: 20px;
    }

    .sel-btn {
      padding: 9px 20px;
      font-family: Georgia, serif;
      font-size: 0.9rem;
      border: 1px solid #c8b89a;
      background: #fff;
      color: #4a2e1a;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s, opacity 0.2s;
    }

    .sel-btn:hover:not(.disabled) {
      background: #4a2e1a;
      color: #fdf6ee;
    }

    .sel-btn.active {
      background: #4a2e1a;
      color: #fdf6ee;
    }

    .sel-btn.disabled {
      opacity: 0.3;
      cursor: not-allowed;
      border-style: dashed;
    }

    #canvas-container {
      position: relative;
      max-width: 800px;
      margin: 0 auto;
      border: 1px solid #c8b89a;
      border-radius: 6px;
      overflow: hidden;
      background: #e8ddd0;
      min-height: 320px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #result-img {
      width: 100%;
      display: block;
    }

    #placeholder-text {
      text-align: center;
      color: #a09080;
      font-size: 1rem;
      padding: 40px;
      line-height: 1.8;
    }

    .caption {
      text-align: center;
      font-size: 0.82rem;
      color: #7a6a5a;
      margin-top: 10px;
      font-style: italic;
      min-height: 20px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    .divider {
      max-width: 800px;
      margin: 4px auto 20px auto;
      border: none;
      border-top: 1px solid #e0d4c0;
    }

    .coming-soon {
      text-align: center;
      color: #a09080;
      font-size: 0.9rem;
      padding: 40px 20px;
      font-style: italic;
    }
  </style>
</head>
<body>

  <h1>Chinoiserie Visualiser</h1>
  <p class="subtitle">Explore how chinoiserie objects complement different interior styles and room types</p>

  <p class="section-label">① Choose a chinoiserie object</p>
  <div class="btn-group" id="object-group">
    <button class="sel-btn" data-obj="fan">Decorative Fan</button>
    <button class="sel-btn" data-obj="chair">Japanned Chair</button>
    <button class="sel-btn" data-obj="bowl">Punch Bowl</button>
    <button class="sel-btn" data-obj="cup">Howitzer Cup</button>
  </div>

  <hr class="divider">

  <p class="section-label">② Choose a room type</p>
  <div class="btn-group" id="room-group">
    <button class="sel-btn" data-room="living">Living Room</button>
    <button class="sel-btn" data-room="library">Library</button>
    <button class="sel-btn" data-room="dining">Dining Room</button>
    <button class="sel-btn" data-room="bedroom">Bedroom</button>
  </div>

  <hr class="divider">

  <p class="section-label">③ Choose an interior style</p>
  <div class="btn-group" id="style-group">
    <button class="sel-btn" data-style="min">Modern Minimalist</button>
    <button class="sel-btn" data-style="scan">Scandinavian</button>
    <button class="sel-btn" data-style="max">Maximalist</button>
    <button class="sel-btn" data-style="deco">Art Deco</button>
  </div>

  <hr class="divider">

  <div id="canvas-container">
    <p id="placeholder-text">Select an object above to begin</p>
    <img id="result-img" src="" alt="" style="display:none;" />
  </div>

  <p class="caption" id="caption-text"></p>

  <script>
    // -------------------------------------------------------
    // ALLOWED ROOMS PER OBJECT
    // -------------------------------------------------------
    const allowedRooms = {
      fan:   ["living", "library", "dining", "bedroom"],
      chair: ["living", "library", "dining", "bedroom"],
      bowl:  ["library", "dining"],
      cup:   ["living", "library", "dining", "bedroom"],
    };

    // -------------------------------------------------------
    // IMAGES THAT ACTUALLY EXIST — add filenames here as you
    // complete them. Format: "object-style-room"
    // e.g. "fan-min-living" means images/fan-min-living.png
    // -------------------------------------------------------
    const availableImages = [
      "fan-min-living",
      // add more here as you complete them, e.g.:
      // "fan-scan-living",
      // "fan-min-library",
      // "chair-min-living",
      // "bowl-min-dining",
      // "cup-min-living",
    ];

    // -------------------------------------------------------
    // CONTEXTUAL CAPTIONS
    // -------------------------------------------------------
    const roomNotes = {
      fan: {
        living:  "Displayed as wall art or arranged as a decorative grouping above a mantelpiece.",
        library: "Mounted as a scholarly curiosity — fans were prized collector's pieces in 18th-century Britain.",
        dining:  "A refined decorative accent above a sideboard or displayed in a cabinet.",
        bedroom: "Adds an intimate decorative quality, historically kept on dressing tables.",
      },
      chair: {
        living:  "Japanned chairs were status symbols in wealthy drawing rooms of the 17th and 18th centuries.",
        library: "A gentleman's library was a natural home for lacquered furniture as a display of taste and learning.",
        dining:  "Occasionally used as a side chair in formal dining rooms to signal wealth and cosmopolitan taste.",
        bedroom: "Placed as a decorative accent chair — japanned furniture was fashionable in ladies' bedchambers.",
      },
      bowl: {
        library: "Large punch bowls were displayed on sideboards or shelves as trophies of taste and commerce.",
        dining:  "The punch bowl was central to 18th-century dining and entertaining — a focal point of the table.",
      },
      cup: {
        living:  "Displayed in cabinets or on mantelpieces as part of a porcelain collection.",
        library: "Howitzer cups were collected and displayed alongside books as markers of refined taste.",
        dining:  "Used at the table for drinking or displayed on a dresser as part of a service.",
        bedroom: "Kept on a dressing table as a decorative vessel, sometimes used to hold trinkets.",
      },
    };

    const objNames   = { fan: "Decorative Fan", chair: "Japanned Chair", bowl: "Punch Bowl", cup: "Howitzer Cup" };
    const roomNames  = { living: "Living Room", library: "Library", dining: "Dining Room", bedroom: "Bedroom" };
    const styleNames = { min: "Modern Minimalist", scan: "Scandinavian", max: "Maximalist", deco: "Art Deco" };

    let selectedObj   = null;
    let selectedRoom  = null;
    let selectedStyle = null;

    function updateRoomAvailability() {
      if (!selectedObj) return;
      const allowed = allowedRooms[selectedObj];
      document.querySelectorAll("#room-group .sel-btn").forEach(btn => {
        const room = btn.dataset.room;
        if (allowed.includes(room)) {
          btn.classList.remove("disabled");
        } else {
          btn.classList.add("disabled");
          if (selectedRoom === room) {
            selectedRoom = null;
            btn.classList.remove("active");
          }
        }
      });
    }

    function updateDisplay() {
      const resultImg   = document.getElementById("result-img");
      const placeholder = document.getElementById("placeholder-text");
      const caption     = document.getElementById("caption-text");

      if (selectedObj && selectedRoom && selectedStyle) {
        const key = `${selectedObj}-${selectedStyle}-${selectedRoom}`;

        if (availableImages.includes(key)) {
          resultImg.src = `images/${key}.png`;
          resultImg.alt = `${objNames[selectedObj]} in a ${styleNames[selectedStyle]} ${roomNames[selectedRoom]}`;
          resultImg.style.display = "block";
          placeholder.style.display = "none";
          const note = roomNotes[selectedObj]?.[selectedRoom] || "";
          caption.textContent = `${objNames[selectedObj]} · ${styleNames[selectedStyle]} ${roomNames[selectedRoom]}${note ? " — " + note : ""}`;
        } else {
          resultImg.style.display = "none";
          placeholder.style.display = "block";
          placeholder.innerHTML = `<span class="coming-soon">✦ This combination is coming soon ✦<br><br>
            <em>${objNames[selectedObj]} · ${styleNames[selectedStyle]} ${roomNames[selectedRoom]}</em></span>`;
          caption.textContent = "";
        }

      } else if (selectedObj && selectedRoom && !selectedStyle) {
        resultImg.style.display = "none";
        placeholder.style.display = "block";
        placeholder.textContent = "Now select an interior style ③";
        caption.textContent = "";

      } else if (selectedObj && !selectedRoom) {
        resultImg.style.display = "none";
        placeholder.style.display = "block";
        placeholder.textContent = "Now select a room type ②";
        caption.textContent = "";

      } else {
        resultImg.style.display = "none";
        placeholder.style.display = "block";
        placeholder.textContent = "Select an object above to begin";
        caption.textContent = "";
      }
    }

    document.querySelectorAll("#object-group .sel-btn").forEach(btn => {
      btn.addEventListener("click", function () {
        document.querySelectorAll("#object-group .sel-btn").forEach(b => b.classList.remove("active"));
        this.classList.add("active");
        selectedObj = this.dataset.obj;
        updateRoomAvailability();
        updateDisplay();
      });
    });

    document.querySelectorAll("#room-group .sel-btn").forEach(btn => {
      btn.addEventListener("click", function () {
        if (this.classList.contains("disabled")) return;
        document.querySelectorAll("#room-group .sel-btn").forEach(b => b.classList.remove("active"));
        this.classList.add("active");
        selectedRoom = this.dataset.room;
        updateDisplay();
      });
    });

    document.querySelectorAll("#style-group .sel-btn").forEach(btn => {
      btn.addEventListener("click", function () {
        document.querySelectorAll("#style-group .sel-btn").forEach(b => b.classList.remove("active"));
        this.classList.add("active");
        selectedStyle = this.dataset.style;
        updateDisplay();
      });
    });
  </script>

</body>
</html>
